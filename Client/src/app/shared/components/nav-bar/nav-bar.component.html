<nav class="bg-gray-50 w-full">
    <app-login-overlay (closeOverlayEventEmitter)="disableLoginOverlay()" *ngIf="showLoginOverlay"></app-login-overlay>
    <div
        class="relative flex items-center contents-center justify-between h-16 bg-gray-50 rounded-b-2xl shadow-md shadow-green-900/50">
        <div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start">

            <div class="flex w-full px-16">

                <div class="flex w-1/2 items-center gap-6">
                    <svg class="fill-green-800" width="36" height="36" viewBox="0 0 36 36" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M13.7283 17.5C13.7283 18.5438 13.3129 19.5435 12.5752 20.281L7.21443 25.6407C7.1244 25.7307 7.03279 25.816 6.93486 25.895C6.70109 26.0892 6.44679 26.2519 6.18144 26.3829C5.63178 26.6561 5.03157 26.7919 4.43294 26.7919C3.4268 26.7919 2.41908 26.4082 1.65145 25.6391C0.116183 24.1042 0.116183 21.6138 1.65145 20.0772L4.22918 17.5L1.65145 14.9212C0.116183 13.3862 0.116183 10.8958 1.65145 9.3593C2.87556 8.13543 4.71093 7.88592 6.18144 8.61708C6.44995 8.74973 6.70583 8.91397 6.94276 9.10979C7.03595 9.18875 7.12756 9.27086 7.21443 9.35772L7.43082 9.57407L12.5752 14.7175C13.3144 15.4565 13.7283 16.4577 13.7283 17.5Z" />
                        <path
                            d="M13.7282 17.5C13.7282 18.5438 13.3128 19.5435 12.5752 20.281L7.21437 25.6407C7.12434 25.7307 7.03273 25.816 6.9348 25.895C6.70103 26.0892 6.44673 26.2519 6.18138 26.3829C5.80704 26.1982 5.45797 25.9502 5.14681 25.6391C3.61154 24.1042 3.61154 21.6138 5.14681 20.0772L7.72454 17.5L5.14839 14.9212C3.61312 13.3862 3.61312 10.8958 5.14839 9.3593C5.45955 9.0482 5.80862 8.80185 6.18138 8.61708C6.44989 8.74973 6.70577 8.91397 6.9427 9.10979C7.03589 9.18875 7.1275 9.27086 7.21437 9.35772L7.43076 9.57407L12.5752 14.7175C13.3144 15.4565 13.7282 16.4577 13.7282 17.5Z" />
                        <path
                            d="M7.43069 9.57727C7.25221 9.44146 7.08794 9.28354 6.94263 9.11298C7.03582 9.19194 7.12743 9.27406 7.2143 9.36092L7.43069 9.57727Z" />
                        <path
                            d="M7.21438 25.6408C7.12435 25.7308 7.03274 25.816 6.93481 25.895C7.08487 25.7166 7.25545 25.5555 7.43867 25.4165L7.21438 25.6408Z" />
                        <path
                            d="M29.8469 17.5C29.8469 25.1165 23.6506 31.31 16.0343 31.31H9.43831C8.55064 31.31 7.74826 30.9594 7.15595 30.3894C7.14647 30.293 7.14331 30.1951 7.14331 30.0941C7.14331 27.9227 8.90445 26.1603 11.0778 26.1603H18.969C23.7454 26.1603 27.6325 22.2755 27.6325 17.4985C27.6325 12.723 23.7454 8.83662 18.969 8.83662H11.0794C8.9076 8.83662 7.14489 7.07582 7.14489 4.90286C7.14489 4.80337 7.14805 4.70389 7.15753 4.60756C7.74984 4.03747 8.55222 3.68689 9.43989 3.68689H16.0343C23.6506 3.69005 29.8469 9.88362 29.8469 17.5Z" />
                    </svg>

                    <!-- User is not logged in, reduced functionality, general pages. -->
                    <div class="flex gap-6" *ngIf="(accountService.currentUser$ | async) == null">
                        <a [routerLink]="['/landing-page']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            About us
                        </a>

                        <a [routerLink]="['/team']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            Team
                        </a>

                        <a [routerLink]="['/faq']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            FAQ
                        </a>

                        <a [routerLink]="['/search-page']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            Search
                        </a>
                    </div>

                    <!-- User is logged in, thus we replace contents of nav-bar to match new functionalities. -->
                    <div class="flex gap-6"
                        *ngIf="(accountService.currentUser$ | async) != null && accountService.ownerID == 0">
                        <a [routerLink]="['/activity']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            Activity
                        </a>

                        <a [routerLink]="['/search-page']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            Search
                        </a>
                    </div>

                    <div class="flex gap-6"
                        *ngIf="(accountService.currentUser$ | async) != null && accountService.ownerID != 0">
                        <a [routerLink]="['/overview']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            Overview
                        </a>

                        <a [routerLink]="['/search-page']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            Search
                        </a>
                    </div>

                    <div class="flex gap-6"
                        *ngIf="(accountService.currentUser$ | async) != null && accountService.IsAdmin()">
                        <a [routerLink]="['/spam']"
                            class="hover:text-green-700 py-2 rounded-md text-base font-light uppercase">
                            Moderate
                        </a>
                    </div>
                </div>

                <div class="flex w-1/2">
                    <div class="flex w-full justify-end gap-6">

                        <button [routerLink]="['/cart']"
                            class="group py-2 rounded-md text-base font-light flex items-center space-x-1"
                            *ngIf="(accountService.currentUser$ | async) != null && accountService.ownerID == 0">

                            <svg class="stroke-2 stroke-gray-900 group-hover:stroke-green-700" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M7 7H7.01M7 3H12C12.512 3 13.024 3.195 13.414 3.586L20.414 10.586C20.7889 10.9611 20.9996 11.4697 20.9996 12C20.9996 12.5303 20.7889 13.0389 20.414 13.414L13.414 20.414C13.0389 20.7889 12.5303 20.9996 12 20.9996C11.4697 20.9996 10.9611 20.7889 10.586 20.414L3.586 13.414C3.4 13.2285 3.25249 13.0081 3.15192 12.7655C3.05136 12.5228 2.99973 12.2627 3 12V7C3 5.93913 3.42143 4.92172 4.17157 4.17157C4.92172 3.42143 5.93913 3 7 3Z"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>

                            <p class="font-light uppercase text-gray-900 group-hover:text-green-700">Total:
                                {{orderService.currentPrice}}$</p>
                        </button>


                        <button (click)="this.redirectToUser()"
                            *ngIf="(accountService.currentUser$ | async) != null && (accountService.currentUser$ | async).isRestaurantOwner == 0"
                            class="group py-2 rounded-md text-base font-light flex items-center space-x-2">

                            <div *ngIf="this.useSVG == false"
                                class="w-6 aspect-square rounded-full shadow-lg overflow-hidden border border-green-900">
                                <img [src]="this.profileImageURL" (error)="this.useSVG = true"
                                    class="h-full object-cover aspect-square">
                            </div>

                            <svg *ngIf="this.useSVG" class="stroke-2 stroke-gray-900 group-hover:stroke-green-700"
                                width="24" height="24" viewBox="0 0 24 24" fill="none"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M5.121 17.804C7.21942 16.6179 9.58958 15.9963 12 16C14.5 16 16.847 16.655 18.879 17.804M15 10C15 10.7956 14.6839 11.5587 14.1213 12.1213C13.5587 12.6839 12.7956 13 12 13C11.2044 13 10.4413 12.6839 9.87868 12.1213C9.31607 11.5587 9 10.7956 9 10C9 9.20435 9.31607 8.44129 9.87868 7.87868C10.4413 7.31607 11.2044 7 12 7C12.7956 7 13.5587 7.31607 14.1213 7.87868C14.6839 8.44129 15 9.20435 15 10ZM21 12C21 13.1819 20.7672 14.3522 20.3149 15.4442C19.8626 16.5361 19.1997 17.5282 18.364 18.364C17.5282 19.1997 16.5361 19.8626 15.4442 20.3149C14.3522 20.7672 13.1819 21 12 21C10.8181 21 9.64778 20.7672 8.55585 20.3149C7.46392 19.8626 6.47177 19.1997 5.63604 18.364C4.80031 17.5282 4.13738 16.5361 3.68508 15.4442C3.23279 14.3522 3 13.1819 3 12C3 9.61305 3.94821 7.32387 5.63604 5.63604C7.32387 3.94821 9.61305 3 12 3C14.3869 3 16.6761 3.94821 18.364 5.63604C20.0518 7.32387 21 9.61305 21 12Z"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>

                            <p class="text-base font-light group-hover:text-green-700 text-gray-900 uppercase">
                                {{(this.accountService.currentUser$ | async).username}}
                            </p>
                        </button>


                        <button (click)="this.redirectToRestaurant()"
                            *ngIf="(accountService.currentUser$ | async) != null && (accountService.currentUser$ | async).isRestaurantOwner > 0"
                            class="group py-2 rounded-md text-base font-light flex items-center space-x-2">

                            <div *ngIf="this.useSVG == false"
                                class="w-6 aspect-square rounded-full shadow-lg overflow-hidden border border-green-900">
                                <img [src]="this.resProfileImageURL" (error)="this.useSVG = true"
                                    class="h-full object-cover aspect-square">
                            </div>

                            <svg *ngIf="this.useSVG" 
                                 class="stroke-2 stroke-gray-900 group-hover:stroke-green-700" 
                                 width="24" height="24" viewBox="0 0 24 24" fill="none"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M19 21V5C19 4.46957 18.7893 3.96086 18.4142 3.58579C18.0391 3.21071 17.5304 3 17 3H7C6.46957 3 5.96086 3.21071 5.58579 3.58579C5.21071 3.96086 5 4.46957 5 5V21M19 21H5M19 21H21M19 21H14M5 21H3M5 21H10M14 21V16C14 15.7348 13.8946 15.4804 13.7071 15.2929C13.5196 15.1054 13.2652 15 13 15H11C10.7348 15 10.4804 15.1054 10.2929 15.2929C10.1054 15.4804 10 15.7348 10 16V21M14 21H10M9 7H10M9 11H10M14 7H15M14 11H15"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>

                            <p class="text-base font-light group-hover:text-green-700 text-gray-900 uppercase">
                                {{(this.accountService.currentUsername$ | async)}}
                            </p>
                        </button>


                        <button [routerLink]="['/landing-page']" (click)="logoutUser()"
                            *ngIf="(accountService.currentUser$ | async) != null"
                            class="group py-2 rounded-md text-base font-light flex items-center space-x-2">

                            <svg class="stroke-gray-900 stroke-2 group-hover:stroke-red-900" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 18H20M4 6H20H4ZM4 12H12H4Z" stroke-linecap="round"
                                    stroke-linejoin="round" />
                            </svg>


                            <p class="text-base font-light group-hover:text-red-900 text-gray-900 uppercase">
                                Logout
                            </p>
                        </button>

                        <button (click)="enableLoginOverlay()" *ngIf="(accountService.currentUser$ | async) == null"
                            class="group rounded-md text-base font-light flex items-center space-x-2">

                            <svg class="stroke-gray-900 group-hover:stroke-green-700" width="21" height="19"
                                viewBox="0 0 21 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M9.5 13.5L5.5 9.5M5.5 9.5L9.5 5.5M5.5 9.5H19.5M14.5 13.5V14.5C14.5 15.2956 14.1839 16.0587 13.6213 16.6213C13.0587 17.1839 12.2956 17.5 11.5 17.5H4.5C3.70435 17.5 2.94129 17.1839 2.37868 16.6213C1.81607 16.0587 1.5 15.2956 1.5 14.5V4.5C1.5 3.70435 1.81607 2.94129 2.37868 2.37868C2.94129 1.81607 3.70435 1.5 4.5 1.5H11.5C12.2956 1.5 13.0587 1.81607 13.6213 2.37868C14.1839 2.94129 14.5 3.70435 14.5 4.5V5.5"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>

                            <p class="text-base font-light group-hover:text-green-700 text-gray-900 uppercase">
                                Login | Register
                            </p>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</nav>