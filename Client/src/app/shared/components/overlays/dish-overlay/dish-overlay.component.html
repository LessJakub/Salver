<div class="fixed top-0 left-0 h-screen w-screen flex items-center justify-center py-4 z-50">
    
    <!-- BG absolute child which is used to detect actions happening behind the main square overlay. -->
    <div (click)="closeOverlayAction()" class="absolute w-full h-full z-10 bg-green-900/30 cursor-pointer backdrop-blur-sm hover:backdrop-blur-none transition-all"></div>
    
    <div class="aspect-square h-[95%] bg-gray-50 rounded-2xl shadow-md shadow-green-900 border-1 border-green-900 z-20">

        <div class="p-8 2xl:p-16 w-full h-full">

            <!-- Upper half content -->
            <div class="flex h-1/2 w-full rounded-2xl overflow-hidden p-4">
                <!-- Left half width content -->
                <div class="w-1/2 h-full rounded-2xl overflow-hidden flex overflow-x-scroll snap-x snap-mandatory">
                    <!-- Image carousel -->
                    <img class="min-w-full object-cover resize snap-start snap-always" [src]="this.modelImageURL" (error)="updateUrlWithDefault()">   
                </div>

                <!-- Right half width content -->
                <div class="w-1/2 h-full">

                    <div class="w-full h-full pl-4">
                        
                        <div class="w-full h-1/4 overflow-clip">
                            <div class="w-full h-1/2 content-center text-right">
                                <p class="text-2xl font-bold truncate text-green-900">{{model.name}}</p>
                            </div>

                            <a [routerLink]="['/restaurant/', model.appRestaurantId]" class="group w-full h-1/2 flex content-center text-right justify-end space-x-2">
                                <div class="text-xl font-thin break-words text-green-900 mb-3 group-hover:animate-pulse"> {{ this.model.restaurantName }}</div>

                                <svg class="fill-gray-50 stroke-green-900" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M17.657 16.657L13.414 20.9C13.2284 21.0857 13.0081 21.2331 12.7656 21.3336C12.523 21.4342 12.2631 21.4859 12.0005 21.4859C11.738 21.4859 11.478 21.4342 11.2354 21.3336C10.9929 21.2331 10.7726 21.0857 10.587 20.9L6.343 16.657C5.22422 15.5382 4.46234 14.1127 4.15369 12.5609C3.84504 11.009 4.00349 9.40051 4.60901 7.93873C5.21452 6.47694 6.2399 5.22754 7.55548 4.3485C8.87107 3.46947 10.4178 3.00029 12 3.00029C13.5822 3.00029 15.1289 3.46947 16.4445 4.3485C17.7601 5.22754 18.7855 6.47694 19.391 7.93873C19.9965 9.40051 20.155 11.009 19.8463 12.5609C19.5377 14.1127 18.7758 15.5382 17.657 16.657V16.657Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M14.1213 13.1213C14.6839 12.5587 15 11.7956 15 11C15 10.2044 14.6839 9.44129 14.1213 8.87868C13.5587 8.31607 12.7956 8 12 8C11.2044 8 10.4413 8.31607 9.87868 8.87868C9.31607 9.44129 9 10.2044 9 11C9 11.7956 9.31607 12.5587 9.87868 13.1213C10.4413 13.6839 11.2044 14 12 14C12.7956 14 13.5587 13.6839 14.1213 13.1213Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg> 
                            </a>
                        </div>

                        <div class="w-full h-1/2 overflow-hidden">
                            <div class="w-full h-1/4">
                                <app-grade-tile [grade]="this.model.tasteGrade" [name]="'taste'"></app-grade-tile>
                            </div>
                                 
                            <div class="w-full h-1/4">
                                <app-grade-tile [grade]="this.model.priceGrade" [name]="'Price'"></app-grade-tile>
                            </div>
            
                            <div class="w-full h-1/4">
                                <app-grade-tile [grade]="this.model.serviceGrade" [name]="'Service'"></app-grade-tile>
                            </div>
                            
                            <div class="w-full h-1/4">
                                <app-grade-tile [grade]="this.model.totalGrade" [name]="'Total Grade'" [significant]="true"></app-grade-tile>
                            </div>
          
                        </div>
                        
                        <!-- Count & Order buttons -->
                        <div class="w-full h-1/4 flex-col space-y-1">

                            <div class="w-full h-1/2 flex gap-4">
                                <div class="w-1/4 h-full justify-start flex">
                                    <button (click)="decrementCount()" class="h-full aspect-square border text-md font-medium rounded-xl text-green-900 bg-gray-50 hover:bg-green-900 hover:text-gray-50 border-green-900">
                                        -
                                    </button>
                                </div>

                                <div class="w-2/4 h-full justify-center flex">
                                    <button class="h-full w-full border text-md font-medium rounded-xl text-green-900 bg-gray-50 hover:bg-green-900 hover:text-gray-50 border-green-900">
                                        {{orderCount}}
                                    </button>
                                </div>

                                <div class="w-1/4 h-full justify-end flex">
                                    <button (click)="incrementCount()" class="h-full aspect-square border text-md font-medium rounded-xl text-green-900 bg-gray-50 hover:bg-green-900 hover:text-gray-50 border-green-900">
                                        +
                                    </button>
                                </div>
                            </div>

                            <div class="w-full h-1/2 flex">
                                <div class="w-full h-full justify-center flex">
                                    <button (click)="takeOrder()" class="flex justify-center group items-center gap-x-2 h-full w-full border text-md font-medium rounded-xl text-green-900 bg-gray-50 hover:bg-green-900 hover:text-gray-50 border-green-900">
                                        Add to Cart

                                        <svg class="stroke-green-900 group-hover:stroke-gray-50" width="12" height="12" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M1 1H3L3.4 3M3.4 3H19L15 11H5M3.4 3L5 11M5 11L2.707 13.293C2.077 13.923 2.523 15 3.414 15H15M15 15C14.4696 15 13.9609 15.2107 13.5858 15.5858C13.2107 15.9609 13 16.4696 13 17C13 17.5304 13.2107 18.0391 13.5858 18.4142C13.9609 18.7893 14.4696 19 15 19C15.5304 19 16.0391 18.7893 16.4142 18.4142C16.7893 18.0391 17 17.5304 17 17C17 16.4696 16.7893 15.9609 16.4142 15.5858C16.0391 15.2107 15.5304 15 15 15ZM7 17C7 17.5304 6.78929 18.0391 6.41421 18.4142C6.03914 18.7893 5.53043 19 5 19C4.46957 19 3.96086 18.7893 3.58579 18.4142C3.21071 18.0391 3 17.5304 3 17C3 16.4696 3.21071 15.9609 3.58579 15.5858C3.96086 15.2107 4.46957 15 5 15C5.53043 15 6.03914 15.2107 6.41421 15.5858C6.78929 15.9609 7 16.4696 7 17Z" stroke="" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>

                </div>
            </div>

            <!-- Bottom half content -->
            <div class="h-1/2 rounded-2xl">

                <div class="h-1/5 w-full px-4 py-1">
                    <div class="w-full h-full">
                        <app-tab-switcher [tabNames]="this.tabs" (tabSelectEvent)="selectNewTab($event)"></app-tab-switcher>
                    </div>
                </div>

                <!-- Overview contents -->
                <div *ngIf="(this.selectedTabID) == 0" class="h-4/5 w-full px-4">
                    
                    <div class="w-full h-1/2 break-words overflow-clip overflow-y-scroll">
                        <p class="text-lg font-bold text-gray-900 py-2">Description</p>

                        <p class="text-base font-light text-gray-900">{{model.description}}</p>
                    </div>

                    <div class="w-full h-1/2 flex">
                        <div class="w-1/2 h-full flex flex-col break-words">
                            <p class="text-lg font-bold text-gray-900 py-2">Details</p>

                            <p class="text-base font-light text-gray-900">{{ model.ingredients }}</p>
                        </div>

                        <div class="w-1/2 h-full flex flex-col break-words">
                            <p class="text-lg font-bold text-gray-900 py-2">Price</p>

                            <p class="text-base font-light text-gray-900">{{ model.price }} $</p>
                        </div>
                        
                    </div>
                </div>

                <!-- Reviews contents -->
                <div *ngIf="(this.selectedTabID) == 1" class="h-4/5 w-full px-4 overflow-hidden overflow-y-scroll">
                    <div class="w-full h-72 snap-start">
                        <app-review-post [model]="this.reviews[0]"></app-review-post>
                    </div>

                    <!-- <div class="w-full h-72 snap-start">
                        <app-review-post></app-review-post>
                    </div>

                    <div class="w-full h-72 snap-start">
                        <app-review-post></app-review-post>
                    </div> -->
                </div>
            </div>
           

        </div>
        
        
    </div>

</div>